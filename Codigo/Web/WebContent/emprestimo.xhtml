<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<ui:decorate template="sistema.xhtml">
	<ui:define name="centro">
	<h:form id="tabelaMaterial">
			<!-- Formulário de Solicitação -->
			<fieldset>
				<legend>Dados da Solicitação</legend>
				<p:panelGrid columns="2">
					<p:outputLabel value="Nome do solicitante" />
					<h:inputText value="#{solicitacaoMB.solicitacao.solicitante}" required="true" />
				</p:panelGrid>
			</fieldset>
			
			<br />
			<br />
			<br />
	
			<!-- Tabela de Materiais -->
			<p:dataTable value="#{materialMB.materiais}" var="material"
				paginator="true" rows="10" paginatorPosition="bottom" resizableColumns="true" >
				
				<p:column headerText="ID" style="width:30px" sortBy="#{material.id}">
					#{material.id}
				</p:column>
				
				<p:column headerText="Categoria" style="width:150px">
					#{material.categoria.nome}
				</p:column>
				
				<p:column headerText="Serial" style="width:120px">
					#{material.serial}
				</p:column>
				
				<p:column headerText="Ativo fixo" sortBy="#{material.ativoFixo}">
					#{material.ativoFixo}
				</p:column>
				
				<p:column headerText="Modelo" style="width:130px">
					#{material.modelo}
				</p:column>
				
				<p:column headerText="Fabricante" style="width:150px">
					#{material.fabricante.nome}
				</p:column>
				
				<p:column headerText="Status" style="width:150px">
					#{material.status}
				</p:column>
				
				<p:column headerText="Ação">
					<h:commandLink update=":tabelaEmprestimo :tabelaMaterial" value="Adicionar" action="#{solicitacaoMB.adicionarItem}">
						<f:setPropertyActionListener target="#{materialMB.material}"
							value="#{material}" />
					</h:commandLink>				
				</p:column>
				
				<p:column/>
				
				
			</p:dataTable>
		</h:form>
		
		<!-- Dados do Material aqui -->
		<h:form id="tabelaEmprestimo">
			<h2>Itens do Empréstimo</h2>
			<p:dataTable value="#{solicitacaoMB.solicitacao.itens}" var="item" rows="10">
				<p:column headerText="ID" style="width:36px" sortBy="#{material.id}">
					#{item.material.id}
				</p:column>
				
				<p:column headerText="Categoria" style="width:150px">
					#{item.material.categoria.nome}
				</p:column>
				
				<p:column headerText="Serial" style="width:120px">
					#{item.material.serial}
				</p:column>
				
				<p:column headerText="Ativo fixo" sortBy="#{material.ativoFixo}">
					#{item.material.ativoFixo}
				</p:column>
				
				<p:column headerText="Modelo" style="width:130px">
					#{item.material.modelo}
				</p:column>
				
				<p:column headerText="Fabricante" style="width:150px">
					#{item.material.fabricante.nome}
				</p:column>
				
				<p:column headerText="Status" style="width:150px">
					#{item.material.status}
				</p:column>
				
				<p:column headerText="Ação">
					<h:commandLink value="Remover"/>
									
				</p:column>
				
				<p:column>
					
				</p:column>
				
			</p:dataTable>
			<br />
			<p:commandButton value="Gravar" action="#{solicitacaoMB.adicionar}"  update=":tabelaEmprestimo :tabelaMaterial"/>
		</h:form>
		
	</ui:define>
</ui:decorate>
<h:head></h:head>
<body>

</body>
</html>
